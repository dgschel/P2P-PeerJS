<!DOCTYPE html>
<html lang="de">

<head>
  <title>Canvas Example</title>
  <script type="module" crossorigin src="index.ts"></script>
</head>

<body>
  <input type="text" name="user-id" id="user-id">
  <button id="create-user-peer">create user</button>
  <label for="ownMedia">Use of media</label>
  <input type="checkbox" name="ownMedia" id="ownMedia">
  <hr />
  <button id="connect-user-peer">connect user</button>
  <hr />
</body>

<script type="module" crossorigin="anonymous">
  import { User, makeCall } from './index.ts';

  const createUserPeerButton = document.getElementById('create-user-peer');
  const ownMediaCheckbox = document.getElementById('ownMedia');
  const connectToUserPeerButton = document.getElementById('connect-user-peer');

  let currentUser = null;

  createUserPeerButton.addEventListener('click', () => {
    const userId = document.getElementById('user-id').value;
    currentUser = new User(userId, ownMediaCheckbox.checked);
  });

  connectToUserPeerButton.addEventListener('click', () => {
    const remoteUserID = prompt('Enter user id');
    if (!remoteUserID) return;

    makeCall(currentUser, remoteUserID);
  });
</script>


</html>